# ClamReef Agent Configuration
# This file should be copied to /opt/homebrew/etc/clamreef/config.yaml

# ClamAV connection settings
clamav:
  # Socket type: "unix" or "tcp"
  socket_type: unix
  # For unix socket
  socket_path: /tmp/clamd.socket
  # For TCP connection (uncomment if using TCP)
  # host: 127.0.0.1
  # port: 3310

  # Connection timeout in seconds
  timeout: 30

  # Retry settings
  retry_attempts: 3
  retry_delay: 5

# Telemetry settings
telemetry:
  # Enable/disable telemetry (disabled by default for privacy)
  enabled: false

  # OpenTelemetry collector endpoint
  otlp_endpoint: "http://localhost:4317"

  # Service name for telemetry
  service_name: "clamreef-agent"

  # Metrics collection interval in seconds
  metrics_interval: 60

  # Include host information in telemetry
  include_host_info: true

# Scanning settings
scanning:
  # Directories to monitor for real-time scanning
  watch_paths:
    - /Users/*/Downloads
    - /Users/*/Desktop
    - /tmp

  # Paths to exclude from scanning
  exclude_paths:
    - /System
    - /Library/Developer
    - /Applications/Xcode.app
    - "*.log"
    - "*.tmp"

  # Maximum file size to scan (in MB)
  max_file_size: 100

  # Enable recursive directory scanning
  recursive: true

  # Follow symbolic links
  follow_symlinks: false

# Agent settings
agent:
  # Log level: debug, info, warn, error
  log_level: info

  # Health check endpoint
  health_check:
    enabled: true
    port: 8080
    path: /health

  # Update check interval (in hours)
  update_check_interval: 24

  # PID file location
  pid_file: /opt/homebrew/var/run/clamreef-agent.pid

# Performance settings
performance:
  # Number of worker threads
  worker_threads: 4

  # Queue size for scan requests
  scan_queue_size: 1000

  # Rate limiting (scans per minute)
  rate_limit: 100

  # Memory limit (in MB)
  memory_limit: 512

# Alert settings
alerts:
  # Enable alerts
  enabled: true

  # Alert on virus detection
  on_virus_found: true

  # Alert on scan errors
  on_scan_error: true

  # Alert destinations (webhook, syslog, etc.)
  # webhook_url: https://your-webhook.example.com/alerts
  # syslog_server: 127.0.0.1:514